#!/usr/bin/env bash

echo "Send a test post message to server"

export server="http://localhost:8080/pb"
#export server="https://api.qiku.mobi/pb"

#export install_query="action=install&source=mat&app_key=battleship-android&site_id=85368&region_name=saitama&sdk_version=4.4.0&country_code=JP&site_name=戦艦帝国-Android-JP&user_agent=Dalvik/2.1.0 (Linux; U; Android 5.0; SC-04F Build/LRX21T)&plat_id=e203fbe3-b97c-4c41-8903-35773410c9b2&publisher_name=Line DSP - RED&device_id=&device_type=android phone&device_carrier=NTT DOCOMO&device_model=SC-04F&device_brand=samsung&lang=ja&click_ip=180.23.106.228&click_time=2017-04-12 05:35:23&match_type=referrer&ad_name=&currency_code=USD&pub_camp_id=&pub_camp_name=&imp_time=&payout=0&referral_source=mat_click_id=90e36b6d9c2037f920b3446cc7e5ea55-20170412-163748&utm_campaign=Internal&utm_content=Internal&utm_medium=Internal&utm_source=Line DSP - RED&utm_term=Internal&referral_url=&revenue=0&revenue_usd=0&status=approved&ios_ifa=&ios_ifv=&google_aid=092C12E8-DF62-4EF3-BD1B-F4703AE489E4&pub_adset=&pub_ad=&os_version=5.0&install_time=2017-04-12 05:46:14&publisher_id=334969&agency_name=850&campaign_id=345736&campaign_name=戦艦帝国-测试版-Android-JP (Default)&stat_click_id=cb3f9d3bdddb2ac1477a3b78ef774d1b&pub_keyword=&pub_place=&adv_camp_id=&adv_camp_name=&adv_adset=&adv_ad=&adv_keyword=&adv_place=&sdk=android&game_user_id=&os_jailbroke=0&pub_pref_id=zzfSnkyft87cdoJwGqUGcC9zuH5620vd0x6rN0q_WyrP&pub_sub1=&pub_sub2=&pub_sub3=&ip=180.23.106.228"
#export install_query="action=Purchase&source=mat&app_key=battleship-ios&site_id=77652&region_name=ishikawa&sdk_version=4.12.4&country_code=JP&site_name=戦艦帝国-IOS-JP&user_agent=Mozilla/5.0 (iPad; CPU OS 11_1_2 like Mac OS X) AppleWebKit/604.3.5 (KHTML, like Gecko) Mobile/15B202&plat_id=622af5cf-08ed-4562-9f7c-9d03d01db692&publisher_name=&device_id=&device_type=ios tablet&device_carrier=&device_model=iPad6,11&device_brand=Apple&lang=ja-JP&click_ip=&click_time=&match_type=&ad_name=&currency_code=JPY&pub_camp_id=&pub_camp_name=&imp_time=&payout=0&referral_source=&referral_url=&revenue=120&revenue_usd=1.0999385867622&status=approved&ios_ifa=C59CA5FA-C062-4BC3-ADA6-B77B134FECE3&ios_ifv=BBCDF271-7FAE-4B8A-9E80-8293B3FC4C37&google_aid=&pub_adset=&pub_ad=&os_version=11.1.2&install_time=2018-01-30 07:44:27&publisher_id=&agency_name=&campaign_id=&campaign_name=&stat_click_id=&pub_keyword=&pub_place=&adv_camp_id=&adv_camp_name=&adv_adset=&adv_ad=&adv_keyword=&adv_place=&sdk=ios&game_user_id=433471739012338137&os_jailbroke=0&pub_pref_id=&pub_sub1=&pub_sub2=&pub_sub3=&ip=60.127.87.195&order_id=180000388242587&event_items_json=[{\"event_item_id\":\"20552486\",\"quantity\":1,\"value\":120,\"value_usd\":1.1000000000000001,\"unit_price\":120,\"unit_price_usd\":1.1000000000000001,\"currency_code\":\"JPY\",\"attribute_sub1\":\"ja_JP@currency=JPY\",\"attribute_sub2\":null,\"attribute_sub3\":null,\"attribute_sub4\":null,\"attribute_sub5\":null,\"event_item_name\":\"50\u30c0\u30a4\u30e4\",\"event_item_ref\":\"50\u30c0\u30a4\u30e4\"}]&"
export install_query="action=Install&source=mat&app_key=battleship-android&site_id=85368&region_name=osaka&sdk_version=4.10.1&country_code=JP&site_name=戦艦帝国-Android-JP&user_agent=Dalvik/2.1.0 (Linux; U; Android 8.0.0; SO-04J Build/47.1.F.0.0)&plat_id=a964d984-813e-497c-b4c3-e16d7fcf74d5&publisher_name=Vungle&device_id=&device_type=android phone&device_carrier=NTT DOCOMO&device_model=SO-04J&device_brand=Sony&lang=ja&click_ip=124.98.191.30&click_time=2018-05-21 08:24:47&match_type=identifier&ad_name=Client_31s_Battleship_JA_170710_And_Landscape_Yamato75_CLOUDUX_NBSHOW&currency_code=USD&pub_camp_id=&pub_camp_name=&imp_time=&payout=0&referral_source=utm_source=(not set)&utm_medium=(not set)&referral_url=&revenue=0&revenue_usd=0&status=approved&ios_ifa=&ios_ifv=&google_aid=81F8925C-9CD3-49AD-B46A-74FA3E23627D&pub_adset=&pub_ad=Client_31s_Battleship_JA_170710_And_Landscape_Yamato75_CLOUDUX_NBSHOW&os_version=8.0.0&install_time=2018-05-21 08:26:14&publisher_id=191271&agency_name=&campaign_id=345736&campaign_name=戦艦帝国-测试版-Android-JP (Default)&stat_click_id=&pub_keyword=&pub_place=&adv_camp_id=&adv_camp_name=&adv_adset=&adv_ad=Client_31s_Battleship_JA_170710_And_Landscape_Yamato75_CLOUDUX_NBSHOW&adv_keyword=&adv_place=&sdk=android&game_user_id=&os_jailbroke=0&pub_pref_id=&pub_sub1=&pub_sub2=&pub_sub3=&ip=124.98.191.30&order_id=&event_items_json=[]&conversion_timestamp=1526891174233&"

#curl --data $Query $Server


# Test Android MAT Install
curl "$server?$install_query"

# Test Google Adwords Postback
# curl -X POST -i --user-agent "AdMob/7.10.1 (Android 6.0; en_US; SM-G900F; Build/MMB29M; Proxy)" --header "X-Forwared-For: 126.94.200.201" "https://www.googleadservices.com/pagead/conversion/app/1.0?app_event_type=first_open&app_version=1.0.0&os_version=11.3&rdid=ff6adafe-1616-4c80-a992-61777abd4a7d&sdk_version=4.12.4&id_type=idfa&dev_token=sxHPIzagxN5RvQ3L-zXGAw&link_id=37967D4551079DE17C9616F525FC5264&lat=1&timestamp=1524812198.128"